{% extends "layout.html" %}
{% block content %}
<h1>Your collection</h1>
<br>
<p>Creata a new list</p>
<form action="/user/{{ session.username }}/mylists" method="POST">
  <p>Name for the list:<br>
    <input type="text" name="listname" required placeholder="Enter name (1-25 long)"></p>
  <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
  <input type="submit" value="Create">
</form>
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <ul class=flashes>
    {% for category, message in messages %}
      <h2 class="{{ category }}">{{ message }}</h2>
    {% endfor %}
    </ul>
  {% endif %}
{% endwith %}
<h3>Lists</h3>
<div>
  {% for list in lists %}
  <form action="/user/{{ session.username }}/mylists/{{ list[0] }}/delete" method="POST">
    <a href="/user/{{ session.username }}/mylists/{{ list[0] }}">{{ list[0] }}</a>
    <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
    <input class="manageList" type="submit" name="btn" value="delete">
  </form>
  <div class="owner">
    <form action="/user/{{ session.username }}/mylists/{{ list[0] }}/edit" method="POST">
      <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
      <input type="hidden" name="listname" value="{{ list[0] }}">
      <input type="text" name="newName" placeholder="Enter new name (1-25 long)" required>
      <input type="submit" value="Rename">
    </form>
  </div>
  {% endfor %}
</div>
{% endblock %}



<script>
  function openEdit() {
    document.getElementById("editForm").style.display = "block";
  }

  function closeEdit() {
    document.getElementById("editForm").style.display = "none";
  }
</script>